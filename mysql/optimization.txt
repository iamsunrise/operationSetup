1.符合三范（3nf）模式
2.分表设计
3，配置优化
4.合理设置索引
5.硬件优化
6.读写分离
7.存储


show 【session|global】status like 默认是session会话，指出当前

show status like 'connections';

#慢查询次数
show status like 'slow_queries';

如何定位慢查询

构建大表（400万）-》存储过程构建->要求记录尽量不同
create database temp; 
set names gbk;

CREATE TABLE dept( /*部门表*/  
deptno MEDIUMINT   UNSIGNED  NOT NULL  DEFAULT 0,   
dname VARCHAR(20)  NOT NULL  DEFAULT "",  
loc VARCHAR(13) NOT NULL DEFAULT ""  
) ENGINE=MyISAM DEFAULT CHARSET=utf8 ;  

  
#创建表EMP雇员  
CREATE TABLE emp  
(empno  MEDIUMINT UNSIGNED  NOT NULL  DEFAULT 0, /*编号*/  
ename VARCHAR(20) NOT NULL DEFAULT "", /*名字*/  
job VARCHAR(9) NOT NULL DEFAULT "",/*工作*/  
mgr MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,/*上级编号*/  
hiredate DATE NOT NULL,/*入职时间*/  
sal DECIMAL(7,2)  NOT NULL,/*薪水*/  
comm DECIMAL(7,2) NOT NULL,/*红利*/  
deptno MEDIUMINT UNSIGNED NOT NULL DEFAULT 0 /*部门编号*/  
)ENGINE=MyISAM DEFAULT CHARSET=utf8 ;  

#工资级别表  
CREATE TABLE salgrade  
(  
grade MEDIUMINT UNSIGNED NOT NULL DEFAULT 0,  
losal DECIMAL(17,2)  NOT NULL,  
hisal DECIMAL(17,2)  NOT NULL  
)ENGINE=MyISAM DEFAULT CHARSET=utf8;  
  
INSERT INTO salgrade VALUES (1,700,1200);  
INSERT INTO salgrade VALUES (2,1201,1400);  
INSERT INTO salgrade VALUES (3,1401,2000);  
INSERT INTO salgrade VALUES (4,2001,3000);  
INSERT INTO salgrade VALUES (5,3001,9999);  
  
为了存储过程能正常执行修改命令执行结束fu
delimiter $$  

create function rand_string(n INT)   
returns varchar(255) #该函数会返回一个字符串  
begin   
#chars_str定义一个变量 chars_str,类型是 varchar(100),默认值'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';  
 declare chars_str varchar(100) default  
   'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';  
 declare return_str varchar(255) default '';  
 declare i int default 0;  
 while i < n do   
   set return_str =concat(return_str,substring(chars_str,floor(1+rand()*52),1));  
   set i = i + 1;  
   end while;  
  return return_str;  
  end $$  



默认情况10s为慢查询

修改慢查询时间为1s
show variables like 'long_query_time';
set long_query_time = 1；


 